(this.webpackJsonpcrypto_tracker_fe=this.webpackJsonpcrypto_tracker_fe||[]).push([[0],{48:function(t,e,c){},50:function(t,e,c){},83:function(t,e,c){"use strict";c.r(e);var n=c(1),a=c.n(n),r=c(8),s=c.n(r),i=(c(48),c(49),c(50),c(9)),o=c(36),u=c(42),l=c(11),j="FETCH_LATEST",h="FETCH_HISTORICAL",d="UPDATE_INTERVAL",b={latest:[],historical:{},historicalHoursBack:6},O=Object(i.c)({tickValue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case j:return Object(l.a)(Object(l.a)({},t),{},{latest:Object(u.a)(e.payload)});case h:return Object(l.a)(Object(l.a)({},t),{},{historical:e.payload});case d:return Object(l.a)(Object(l.a)({},t),{},{historicalHoursBack:e.payload});default:return t}}}),f=Object(i.e)(O,Object(i.d)(Object(i.a)(o.a))),x=c(12),p=c(38),m=c(94),v=c(95),k=c(96),y=c(23),g=c.n(y),T=c(39),H=c(41),w=c(84),E=c(85),I=c(86),B=c(87),S=c(88),C=c(24),L=c.n(C),V="https://cors.bridged.cc/http://165.227.107.127:5000/api",_=function(t,e){try{return t.symbol.localeCompare(e.symbol)}catch(c){return 0}},F=function(){return function(t){var e=f.getState().tickValue.historicalHoursBack;L.a.get("".concat(V,"/History?hoursBack=").concat(e)).then((function(e){return t({type:h,payload:e.data})})).catch((function(t){return console.log(t)}))}},N=c(3),A={fetchLatest:function(){return function(t){L.a.get("".concat(V,"/Ticks")).then((function(e){return t({type:j,payload:e.data.sort(_)})})).catch((function(t){return console.log(t)}))}},fetchHistorical:F},P=Object(x.b)((function(t){return{values:t.tickValue.latest}}),A)((function(t){var e=t.fetchLatest,c=t.fetchHistorical,a=t.values,r=Object(n.useState)(60),s=Object(H.a)(r,2),i=s[0],o=s[1];return Object(n.useEffect)((function(){e()}),[]),Object(n.useEffect)((function(){var t=setTimeout(Object(T.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i-1<1)){t.next=7;break}return e(),t.next=4,c();case 4:o(60),t.next=8;break;case 7:o(i-1>0?i-1:0);case 8:case"end":return t.stop()}}),t)}))),1e3);return function(){return clearTimeout(t)}})),Object(N.jsx)(w.a,{children:Object(N.jsxs)(E.a,{children:[Object(N.jsx)(I.a,{tag:"h5",children:"Latest Values"}),Object(N.jsxs)(B.a,{className:"mt-2",children:[i," second",i>1?"s":""," until next update"]}),Object(N.jsxs)(S.a,{className:"mt-4",children:[Object(N.jsx)("thead",{children:Object(N.jsxs)("tr",{children:[Object(N.jsx)("th",{children:"Market Symbol"}),Object(N.jsx)("th",{children:"Trade Rate"})]})}),Object(N.jsx)("tbody",{children:a.map((function(t,e){return Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{children:t.symbol}),Object(N.jsx)("td",{children:t.lastTradeRate})]},e)}))})]}),0===a.length&&Object(N.jsx)("span",{children:"Retrieving data..."})]})})})),R=c(89),D=c(90),J=c(91),M=c(92),G=c(93),U=c(40),q=c.n(U),z={fetchHistorical:F,updateInterval:function(t){return function(e){e({type:d,payload:t})}}},K=Object(x.b)((function(t){return{values:t.tickValue.historical,historicalHoursBack:t.tickValue.historicalHoursBack}}),z)((function(t){var e=t.fetchHistorical,c=t.values,a=t.historicalHoursBack,r=t.updateInterval;Object(n.useEffect)((function(){e()}),[a]);var s,i=(s=c,Object.entries(s).map((function(t){return{name:t[0],data:t[1].map((function(t){return t.close.toPrecision(6)}))}})));return Object(N.jsxs)("div",{children:[Object(N.jsxs)("h4",{children:["Closing price in the last ",a," hours"]}),Object(N.jsx)(q.a,{options:{chart:{id:"line"},stroke:{curve:"smooth",width:2},grid:{xaxis:{lines:{show:!0}}},xaxis:{labels:{show:!1}}},series:i,type:"line",height:"480"}),Object(N.jsx)("div",{className:"mt-4",children:Object(N.jsxs)(R.a,{onSubmit:function(t){t.preventDefault();var e=t.target.hours.value;!parseInt(e)||e<2||e>744?window.alert("Input must be a number between 2 and 744"):r(e)},children:[Object(N.jsxs)(D.a,{children:[Object(N.jsx)(J.a,{for:"hours",children:"Edit Interval:"}),Object(N.jsx)(M.a,{type:"hours",name:"hours",id:"hours",placeholder:a})]}),Object(N.jsx)(G.a,{children:"Save"})]})})]})}));var Q=function(){return Object(N.jsx)(x.a,{store:f,children:Object(N.jsx)(p.ToastProvider,{autoDismiss:!0,children:Object(N.jsx)("div",{className:"App",children:Object(N.jsx)(m.a,{className:"mt-4",children:Object(N.jsxs)(v.a,{noGutters:!1,children:[Object(N.jsx)(k.a,{xs:"12",sm:"6",children:Object(N.jsx)(P,{})}),Object(N.jsx)(k.a,{xs:"12",sm:"6",children:Object(N.jsx)(K,{})})]})})})})})},W=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,97)).then((function(e){var c=e.getCLS,n=e.getFID,a=e.getFCP,r=e.getLCP,s=e.getTTFB;c(t),n(t),a(t),r(t),s(t)}))};s.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(Q,{})}),document.getElementById("root")),W()}},[[83,1,2]]]);
//# sourceMappingURL=main.36d80d99.chunk.js.map