(this.webpackJsonpcrypto_tracker_fe=this.webpackJsonpcrypto_tracker_fe||[]).push([[0],{48:function(t,e,c){},50:function(t,e,c){},83:function(t,e,c){"use strict";c.r(e);var n=c(1),a=c.n(n),r=c(8),s=c.n(r),i=(c(48),c(49),c(50),c(9)),o=c(36),u=c(42),l=c(11),j="FETCH_LATEST",h="FETCH_HISTORICAL",d="UPDATE_INTERVAL",b={latest:[],historical:{},historicalHoursBack:6},O=Object(i.c)({tickValue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case j:return Object(l.a)(Object(l.a)({},t),{},{latest:Object(u.a)(e.payload)});case h:return Object(l.a)(Object(l.a)({},t),{},{historical:e.payload});case d:return Object(l.a)(Object(l.a)({},t),{},{historicalHoursBack:e.payload});default:return t}}}),f=Object(i.e)(O,Object(i.d)(Object(i.a)(o.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),x=c(12),p=c(38),m=c(94),v=c(95),k=c(96),y=c(23),g=c.n(y),T=c(39),_=c(41),E=c(84),w=c(85),H=c(86),S=c(87),I=c(88),L=c(24),N=c.n(L),B="http://165.227.107.127:5000/api",V=function(t,e){try{return t.symbol.localeCompare(e.symbol)}catch(c){return 0}},C=function(){return function(t){var e=f.getState().tickValue.historicalHoursBack;N.a.get("".concat(B,"/History?hoursBack=").concat(e)).then((function(e){return t({type:h,payload:e.data})})).catch((function(t){return console.log(t)}))}},D=c(3),R={fetchLatest:function(){return function(t){N.a.get("".concat(B,"/Ticks")).then((function(e){return t({type:j,payload:e.data.sort(V)})})).catch((function(t){return console.log(t)}))}},fetchHistorical:C},F=Object(x.b)((function(t){return{values:t.tickValue.latest}}),R)((function(t){var e=t.fetchLatest,c=t.fetchHistorical,a=t.values,r=Object(n.useState)(60),s=Object(_.a)(r,2),i=s[0],o=s[1];return Object(n.useEffect)((function(){e()}),[]),Object(n.useEffect)((function(){var t=setTimeout(Object(T.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i-1<1)){t.next=7;break}return e(),t.next=4,c();case 4:o(60),t.next=8;break;case 7:o(i-1>0?i-1:0);case 8:case"end":return t.stop()}}),t)}))),1e3);return function(){return clearTimeout(t)}})),Object(D.jsx)(E.a,{children:Object(D.jsxs)(w.a,{children:[Object(D.jsx)(H.a,{tag:"h5",children:"Latest Values"}),Object(D.jsxs)(S.a,{className:"mt-2",children:[i," second",i>1?"s":""," until next update"]}),Object(D.jsxs)(I.a,{className:"mt-4",children:[Object(D.jsx)("thead",{children:Object(D.jsxs)("tr",{children:[Object(D.jsx)("th",{children:"Market Symbol"}),Object(D.jsx)("th",{children:"Trade Rate"})]})}),Object(D.jsx)("tbody",{children:a.map((function(t,e){return Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:t.symbol}),Object(D.jsx)("td",{children:t.lastTradeRate})]},e)}))})]}),0===a.length&&Object(D.jsx)("span",{children:"Retrieving data..."})]})})})),A=c(89),P=c(90),X=c(91),U=c(92),J=c(93),M=c(40),G=c.n(M),q={fetchHistorical:C,updateInterval:function(t){return function(e){e({type:d,payload:t})}}},z=Object(x.b)((function(t){return{values:t.tickValue.historical,historicalHoursBack:t.tickValue.historicalHoursBack}}),q)((function(t){var e=t.fetchHistorical,c=t.values,a=t.historicalHoursBack,r=t.updateInterval;Object(n.useEffect)((function(){e()}),[a]);var s,i=(s=c,Object.entries(s).map((function(t){return{name:t[0],data:t[1].map((function(t){return t.close.toPrecision(6)}))}})));return Object(D.jsxs)("div",{children:[Object(D.jsxs)("h4",{children:["Closing price in the last ",a," hours"]}),Object(D.jsx)(G.a,{options:{chart:{id:"line"},stroke:{curve:"smooth",width:2},grid:{xaxis:{lines:{show:!0}}},xaxis:{labels:{show:!1}}},series:i,type:"line",height:"480"}),Object(D.jsx)("div",{className:"mt-4",children:Object(D.jsxs)(A.a,{onSubmit:function(t){t.preventDefault();var e=t.target.hours.value;!parseInt(e)||e<2||e>744?window.alert("Input must be a number between 2 and 744"):r(e)},children:[Object(D.jsxs)(P.a,{children:[Object(D.jsx)(X.a,{for:"hours",children:"Edit Interval:"}),Object(D.jsx)(U.a,{type:"hours",name:"hours",id:"hours",placeholder:a})]}),Object(D.jsx)(J.a,{children:"Save"})]})})]})}));var K=function(){return Object(D.jsx)(x.a,{store:f,children:Object(D.jsx)(p.ToastProvider,{autoDismiss:!0,children:Object(D.jsx)("div",{className:"App",children:Object(D.jsx)(m.a,{className:"mt-4",children:Object(D.jsxs)(v.a,{noGutters:!1,children:[Object(D.jsx)(k.a,{xs:"12",sm:"6",children:Object(D.jsx)(F,{})}),Object(D.jsx)(k.a,{xs:"12",sm:"6",children:Object(D.jsx)(z,{})})]})})})})})},Q=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,97)).then((function(e){var c=e.getCLS,n=e.getFID,a=e.getFCP,r=e.getLCP,s=e.getTTFB;c(t),n(t),a(t),r(t),s(t)}))};s.a.render(Object(D.jsx)(a.a.StrictMode,{children:Object(D.jsx)(K,{})}),document.getElementById("root")),Q()}},[[83,1,2]]]);
//# sourceMappingURL=main.d4a7d580.chunk.js.map