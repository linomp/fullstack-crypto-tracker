(this.webpackJsonpcrypto_tracker_fe=this.webpackJsonpcrypto_tracker_fe||[]).push([[0],{48:function(t,e,c){},50:function(t,e,c){},85:function(t,e,c){"use strict";c.r(e);var a=c(1),n=c.n(a),r=c(9),s=c.n(r),i=(c(48),c(49),c(50),c(11)),o=c(35),u=c(42),l=c(12),j="FETCH_LATEST",h="FETCH_HISTORICAL",d="UPDATE_INTERVAL",b={latest:[],historical:{},historicalHoursBack:6},O=Object(i.c)({tickValue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case j:return Object(l.a)(Object(l.a)({},t),{},{latest:Object(u.a)(e.payload)});case h:return Object(l.a)(Object(l.a)({},t),{},{historical:e.payload});case d:return Object(l.a)(Object(l.a)({},t),{},{historicalHoursBack:e.payload});default:return t}}}),f=Object(i.e)(O,Object(i.d)(Object(i.a)(o.a))),x=c(13),p=c(38),m=c(96),v=c(97),k=c(98),y=c(23),T=c.n(y),g=c(39),E=c(41),_=c(86),S=c(87),H=c(88),C=c(89),I=c(90),w=c(16),R=c.n(w);R.a.defaults.headers.common["x-cors-grida-api-key"]=Object({NODE_ENV:"production",PUBLIC_URL:"/fullstack-crypto-tracker",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GRIDA_KEY;var A="https://cors.bridged.cc/http://165.227.107.127:5000/api",B=function(t,e){try{return t.symbol.localeCompare(e.symbol)}catch(c){return 0}},L=function(){return function(t){var e=f.getState().tickValue.historicalHoursBack;R.a.get("".concat(A,"/History?hoursBack=").concat(e)).then((function(e){return t({type:h,payload:e.data})})).catch((function(t){return console.log(t)}))}},P=c(4),D={fetchLatest:function(){return function(t){R.a.get("".concat(A,"/Ticks")).then((function(e){return t({type:j,payload:e.data.sort(B)})})).catch((function(t){return console.log(t)}))}},fetchHistorical:L},F=Object(x.b)((function(t){return{values:t.tickValue.latest}}),D)((function(t){var e=t.fetchLatest,c=t.fetchHistorical,n=t.values,r=Object(a.useState)(60),s=Object(E.a)(r,2),i=s[0],o=s[1];return Object(a.useEffect)((function(){e()}),[]),Object(a.useEffect)((function(){var t=setTimeout(Object(g.a)(T.a.mark((function t(){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i-1<1)){t.next=7;break}return e(),t.next=4,c();case 4:o(60),t.next=8;break;case 7:o(i-1>0?i-1:0);case 8:case"end":return t.stop()}}),t)}))),1e3);return function(){return clearTimeout(t)}})),Object(P.jsx)(_.a,{children:Object(P.jsxs)(S.a,{children:[Object(P.jsx)(H.a,{tag:"h5",children:"Latest Values"}),Object(P.jsxs)(C.a,{className:"mt-2",children:[i," second",i>1?"s":""," until next update"]}),Object(P.jsxs)(I.a,{className:"mt-4",children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"Market Symbol"}),Object(P.jsx)("th",{children:"Trade Rate"})]})}),Object(P.jsx)("tbody",{children:n.map((function(t,e){return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:t.symbol}),Object(P.jsx)("td",{children:t.lastTradeRate})]},e)}))})]}),0===n.length&&Object(P.jsx)("span",{children:"Retrieving data..."})]})})})),N=c(91),V=c(92),K=c(93),U=c(94),W=c(95),G=c(40),J=c.n(G),M={fetchHistorical:L,updateInterval:function(t){return function(e){e({type:d,payload:t})}}},Y=Object(x.b)((function(t){return{values:t.tickValue.historical,historicalHoursBack:t.tickValue.historicalHoursBack}}),M)((function(t){var e=t.fetchHistorical,c=t.values,n=t.historicalHoursBack,r=t.updateInterval;Object(a.useEffect)((function(){e()}),[n]);var s,i=(s=c,Object.entries(s).map((function(t){return{name:t[0],data:t[1].map((function(t){return t.close.toPrecision(6)}))}})));return Object(P.jsxs)("div",{children:[Object(P.jsxs)("h4",{children:["Closing price in the last ",n," hours"]}),Object(P.jsx)(J.a,{options:{chart:{id:"line"},stroke:{curve:"smooth",width:2},grid:{xaxis:{lines:{show:!0}}},xaxis:{labels:{show:!1}}},series:i,type:"line",height:"480"}),Object(P.jsx)("div",{className:"mt-4",children:Object(P.jsxs)(N.a,{onSubmit:function(t){t.preventDefault();var e=t.target.hours.value;!parseInt(e)||e<2||e>744?window.alert("Input must be a number between 2 and 744"):r(e)},children:[Object(P.jsxs)(V.a,{children:[Object(P.jsx)(K.a,{for:"hours",children:"Edit Interval:"}),Object(P.jsx)(U.a,{type:"hours",name:"hours",id:"hours",placeholder:n})]}),Object(P.jsx)(W.a,{children:"Save"})]})})]})}));var q=function(){return Object(P.jsx)(x.a,{store:f,children:Object(P.jsx)(p.ToastProvider,{autoDismiss:!0,children:Object(P.jsx)("div",{className:"App",children:Object(P.jsx)(m.a,{className:"mt-4",children:Object(P.jsxs)(v.a,{noGutters:!1,children:[Object(P.jsx)(k.a,{xs:"12",sm:"6",children:Object(P.jsx)(F,{})}),Object(P.jsx)(k.a,{xs:"12",sm:"6",children:Object(P.jsx)(Y,{})})]})})})})})},z=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,99)).then((function(e){var c=e.getCLS,a=e.getFID,n=e.getFCP,r=e.getLCP,s=e.getTTFB;c(t),a(t),n(t),r(t),s(t)}))};s.a.render(Object(P.jsx)(n.a.StrictMode,{children:Object(P.jsx)(q,{})}),document.getElementById("root")),z()}},[[85,1,2]]]);
//# sourceMappingURL=main.a7b0aac5.chunk.js.map